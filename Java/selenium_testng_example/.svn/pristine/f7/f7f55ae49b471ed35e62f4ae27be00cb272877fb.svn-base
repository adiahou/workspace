package dxy.vs.pages;

import static org.junit.Assert.assertTrue;

import java.util.List;

import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.FindBy;

import dxy.vs.base.SetUp;

public class Exam_ManageModePage extends SetUp{

	@FindBy(xpath="//span[text()='答题系统']/../..")
	public WebElement menu_Exam;

	@FindBy(xpath="//a[contains(text(),'问卷管理')]")
	public WebElement submenu_manageMode;

	@FindBy(xpath="//section[@class='content-header']/h1")
	public WebElement pageTitle;

	@FindBy(xpath="//a[text()='新增']")
	public WebElement btn_new;
	
	@FindBy(xpath=".//*[@id='title']")
	public WebElement input_title;
	
	@FindBy(xpath=".//*[@id='type']/option")
	public List<WebElement> option_type;

	@FindBy(xpath=".//*[@id='times']")
	public WebElement input_time;

	@FindBy(xpath=".//*[@id='feedback']")
	public WebElement input_feedback;
	
	@FindBy(xpath=".//*[@id='submitbutton']")
	public WebElement btn_save;
	
	
	 public  void openManageExamPage() throws Exception{
			
		 if(!menu_Exam.getAttribute("class").contains("active")){
			 menu_Exam.click();
				Thread.sleep(1000);
		 }
		 submenu_manageMode.click();
		waitForPageLoadComplete();
		waitForElementExist(pageTitle);
		
		assertTrue("页面标题错误",pageTitle.getText().contains("问卷管理"));
	}
	 
	 public void createExam(String type,String time) throws Exception{
		 btn_new.click();
		 waitForPageLoadComplete();
		 waitForElementExist(btn_save);
		 
		 String title=p("examTitle");
		 if(type.equals("答题")){
			 title=title+"_答题";
			 option_type.get(0).click();
		 }else if(type.equals("调研")){
			 title=title+"_调研";
			 option_type.get(1).click();
		 }else if(type.equals("投票")){
			 title=title+"_投票";
			 option_type.get(2).click();
		 }
		 
		 input_time.clear();
		 input_time.sendKeys(time);
		 if(time.equals("1")){
			 title=title+"_一次";
		 }else if(time.equals("0")){
			 title=title+"_无数次";
		 }
		 
		 input_title.sendKeys(title);
		 input_feedback.sendKeys(p("examFeedback"));
		 btn_save.click();
		 waitForPageLoadComplete();
		 waitForElementExist(btn_new);
	 }
	 
	 public void updateExam() throws Exception{
		 
	 }
}
