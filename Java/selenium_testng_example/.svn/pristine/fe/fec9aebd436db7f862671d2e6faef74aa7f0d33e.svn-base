package dxy.vs.testcase.exam;

import org.openqa.selenium.support.PageFactory;
import org.testng.annotations.Test;

import dxy.vs.base.ReusableFunctions;
import dxy.vs.base.SetUp;
import dxy.vs.pages.CMS_ManageContentPage;
import dxy.vs.pages.Exam_ManageModePage;
import dxy.vs.pages.Exam_ManageQuestionPage;
import dxy.vs.pages.Exam_ScorePage;
import dxy.vs.pages.Front_Demo1Page;

public class F_01_2_manageSurvey extends SetUp{
	
	//Initialize Pages
	ReusableFunctions reusableFunctions;
	Exam_ManageModePage manageModePage;
	Exam_ManageQuestionPage manageQuestionPage;
	CMS_ManageContentPage manageContentPage;
	Front_Demo1Page demo1Page;
	Exam_ScorePage scorePage;
	
	String surveyUrl="";
	
	@Test
	public void newSurvey() throws Exception{
		reusableFunctions= PageFactory.initElements(threadDriver.get(), ReusableFunctions.class);
		manageModePage= PageFactory.initElements(threadDriver.get(), Exam_ManageModePage.class);
		manageQuestionPage= PageFactory.initElements(threadDriver.get(), Exam_ManageQuestionPage.class);
		manageContentPage= PageFactory.initElements(threadDriver.get(), CMS_ManageContentPage.class);
		demo1Page= PageFactory.initElements(threadDriver.get(), Front_Demo1Page.class);
		scorePage= PageFactory.initElements(threadDriver.get(), Exam_ScorePage.class);
		
		reusableFunctions.enterVS(0);
		
		manageModePage.openManageExamPage();
		manageModePage.clearOldData();
		String surveyTitle=manageModePage.createExam("调研");
		
		manageQuestionPage.openManageQuestionPage();
		manageQuestionPage.clearOldData();
		manageQuestionPage.creatQuestion("单选", true, null,"1",false);
		manageQuestionPage.creatQuestion("单选", false, null,"2",true);
		manageQuestionPage.creatQuestion("多选", true, null,"3",false);
		manageQuestionPage.creatQuestion("多选", false, null,"4",true);
		
		manageContentPage.openContentManagePage();
		surveyUrl = manageContentPage.newExamContent(surveyTitle);
		demo1Page.verifyExam(surveyUrl, true, false, true,true,false);
	}
	
	@Test
	(dependsOnMethods = {"newSurvey"})
	public void updateSurvey() throws Exception{
		reusableFunctions= PageFactory.initElements(threadDriver.get(), ReusableFunctions.class);
		manageModePage= PageFactory.initElements(threadDriver.get(), Exam_ManageModePage.class);
		demo1Page= PageFactory.initElements(threadDriver.get(), Front_Demo1Page.class);
		
		reusableFunctions.enterVS(0);
		
		manageModePage.openManageExamPage();
		manageModePage.updateExam(false,false,false,true);
		
		demo1Page.verifyExam(surveyUrl, false, false, false,true,false);
	}
	
	@Test
	(dependsOnMethods = {"updateSurvey"})
	public void disableSurvey() throws Exception{
		reusableFunctions= PageFactory.initElements(threadDriver.get(), ReusableFunctions.class);
		manageModePage= PageFactory.initElements(threadDriver.get(), Exam_ManageModePage.class);
		demo1Page= PageFactory.initElements(threadDriver.get(), Front_Demo1Page.class);
		
		reusableFunctions.enterVS(0);
		
		manageModePage.openManageExamPage();
		manageModePage.updateExam(false,false,false,false);
		
		demo1Page.verifyExam(surveyUrl, false, false, false, false,false);
	}
	
	
	@Test
	(dependsOnMethods = {"disableSurvey"})
	public void deleteSurvey() throws Exception{
		reusableFunctions= PageFactory.initElements(threadDriver.get(), ReusableFunctions.class);
		manageModePage= PageFactory.initElements(threadDriver.get(), Exam_ManageModePage.class);
		manageQuestionPage= PageFactory.initElements(threadDriver.get(), Exam_ManageQuestionPage.class);
		manageContentPage= PageFactory.initElements(threadDriver.get(), CMS_ManageContentPage.class);
		
		reusableFunctions.enterVS(0);
		manageModePage.openManageExamPage();
		manageModePage.clearOldData();
		
		manageQuestionPage.openManageQuestionPage();
		manageQuestionPage.clearOldData();
		
		manageContentPage.openContentManagePage();
		manageContentPage.clearOldData();
	}
	
}
